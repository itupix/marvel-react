(this["webpackJsonpmarvel-react"]=this["webpackJsonpmarvel-react"]||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a(21)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),u=a.n(c),l=a(1),s=a(2),o=a.n(s),i=a(3),m="930e43a8496c8cc563f2d22c2b2c764d",f=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c,u,l,s,i,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query,n=t.offset,r=t.total,c=a.value?"&nameStartsWith=".concat(a.value):"",u=n.value?"&offset=".concat(n.value):"",e.next=5,fetch("https://gateway.marvel.com:443/v1/public/characters?apikey=".concat(m).concat(c).concat(u));case 5:return l=e.sent,e.next=8,l.json();case 8:return s=e.sent,i=s.data,f=i.results,n.set(i.offset),r.set(i.total),e.abrupt("return",f);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t,"?apikey=").concat(m));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,r=n.data,c=r.results,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=r.a.createContext(null),d=r.a.createContext(0),E=r.a.createContext(null),p=r.a.createContext(null),h=(a(13),function(e){var t=e.isVisible,a=e.currentPage,n=e.numberOfPages,c=e.decrement,u=e.increment,l=e.isFirst,s=e.isLast;return r.a.createElement("nav",{className:"navigation"},t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,a," / ",n),r.a.createElement("button",{onClick:c,disabled:l},"\u276e"),r.a.createElement("button",{onClick:u,disabled:s},"\u276f")))}),j=function(){var e=function(){var e=Object(n.useContext)(p),t=Object(n.useContext)(d),a=Object(n.useContext)(E),r=0===t.value,c=Math.ceil(a.value/20),u=t.value/20+1,l=c===u;return{isVisible:c>1&&!e.value,isLast:l,isFirst:r,numberOfPages:c,currentPage:u,increment:function(){return t.set(t.value+20)},decrement:function(){return t.set(t.value-20)}}}();return r.a.createElement(h,e)},O=(a(14),function(e){var t=e.onSubmit,a=e.currentQuery,n=e.onChange;return r.a.createElement("header",null,r.a.createElement("h1",null,"M",r.a.createElement("span",null,"AR",r.a.createElement("b",null,"S"),"VEL",r.a.createElement("b",null,"TE"))),r.a.createElement("form",{className:"search",onSubmit:t},r.a.createElement("input",{type:"text",onChange:n,value:a}),r.a.createElement("input",{type:"submit",value:"\ud83d\udd0e"})),r.a.createElement(j,null))}),g=function(){var e=function(){var e=Object(n.useContext)(b),t=Object(n.useContext)(d),a=Object(n.useState)(""),r=Object(l.a)(a,2),c=r[0],u=r[1];return{query:e.value,currentQuery:c,onSubmit:function(a){a.preventDefault(),e.set(c),t.set(null)},onChange:function(e){u(e.target.value)}}}();return r.a.createElement(O,e)},y=(a(15),function(e){var t=e.displayDetails,a=e.src,n=e.character;return r.a.createElement("button",{className:"character",onClick:t},r.a.createElement("img",{className:"avatar",src:a,alt:n.name}),r.a.createElement("span",{className:"name"},n.name))}),C=function(e){var t=function(e){var t=e.character,a=function(e){var t=e.thumbnail;return"".concat(t.path,"/standard_medium.").concat(t.extension)}(t),r=Object(n.useContext)(p),c=Object(n.useCallback)((function(){r.set(t)}),[t,r]);return{src:a,character:t,displayDetails:c}}({character:e.character});return r.a.createElement(y,t)},k=function(e){var t=e.message;return r.a.createElement("div",{className:"error"},r.a.createElement("p",null,t))},x=(a(16),function(e){var t=e.characters;return t.length?r.a.createElement("ul",{className:"characters"},t.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(C,{character:e}))}))):r.a.createElement(k,{message:"Aucun r\xe9sultat."})}),N=(a(17),function(e){var t=e.centered;return r.a.createElement("div",{className:"loader ".concat(t?"loader--centered":"")},"Chargement ...")}),S=a(6),_=function(e){var t=e.status,a=e.collection;return r.a.createElement("div",{className:"tab-content__item"},{ok:r.a.createElement(r.a.Fragment,null,a&&a.length?r.a.createElement("ul",{className:"references-list"},a.map((function(e){var t=e.src,a=e.title;return r.a.createElement("li",{key:a},r.a.createElement("img",{src:t,alt:a}),a)}))):r.a.createElement("p",{className:"tab-content__message"},"Cette collection est vide.")),loading:r.a.createElement(N,{centered:!0}),error:r.a.createElement(k,{message:"Impossible d'afficher les r\xe9f\xe9rences de ce personnage \xe0 cause d'une erreur technique."})}[t])},w=function(e){var t=e.thumbnail;return t?"".concat(t.path,"/portrait_medium.").concat(t.extension):"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available/portrait_medium.jpg"},I=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.setStatus,n=t.setCollection,r=t.URI,a("loading"),e.next=4,v(r);case 4:(c=e.sent)?(u=c.map((function(e){return Object(S.a)({},e,{src:w(e)})})),n(u),a("ok")):a("error");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){var t=function(e){var t=e.URI,a=Object(n.useState)(null),r=Object(l.a)(a,2),c=r[0],u=r[1],s=Object(n.useState)([]),o=Object(l.a)(s,2),i=o[0],m=o[1];return Object(n.useEffect)((function(){I({setStatus:u,setCollection:m,URI:t})}),[t]),{collection:i,status:c}}({URI:e.URI});return r.a.createElement(_,t)},R=[{key:"comics",label:"Comics"},{key:"series",label:"Series"},{key:"stories",label:"Stories"},{key:"events",label:"Events"}],P=(a(18),function(e){var t=e.current,a=e.setCurrent,n=e.details;return r.a.createElement("div",{className:"references"},r.a.createElement("nav",{className:"tabs","data-current":t},R.map((function(e,t){return r.a.createElement("button",{key:t,onClick:function(){return a(t)}},e.label)}))),r.a.createElement("div",{className:"tab-content","data-current":t},R.map((function(e){return r.a.createElement(q,{key:n[e.key].collectionURI,URI:n[e.key].collectionURI})}))))}),U=function(){var e=function(){var e=Object(n.useState)(0),t=Object(l.a)(e,2),a=t[0],r=t[1];return{details:Object(n.useContext)(p).value,current:a,setCurrent:r}}();return r.a.createElement(P,e)},F=(a(19),function(e){var t=e.className,a=e.details,n=e.close,c=e.src;return r.a.createElement("div",{className:"character-details ".concat(t)},a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bio"},r.a.createElement("img",{className:"bio__avatar",src:c,alt:a.name}),r.a.createElement("h2",{className:"bio__title"},a.name),r.a.createElement("p",{className:"bio__description"},a.description)),r.a.createElement(U,null),r.a.createElement("button",{className:"character-details__close",onClick:n},"Fermer")))}),D=function(){var e=function(){var e=Object(n.useContext)(p),t=e.value?"character-details--visible":"",a=e.value?"".concat(e.value.thumbnail.path,"/standard_xlarge.").concat(e.value.thumbnail.extension):null;return{details:e.value,className:t,close:function(){return e.set(null)},src:a}}();return r.a.createElement(F,e)},L=(a(20),function(e){var t=e.status,a=e.characters,n=e.query,c=e.details,u=e.offset,l=e.total;return r.a.createElement(E.Provider,{value:l},r.a.createElement(d.Provider,{value:u},r.a.createElement(b.Provider,{value:n},r.a.createElement(p.Provider,{value:c},r.a.createElement(g,null),r.a.createElement("main",null,{loading:r.a.createElement(N,{centered:!0}),error:r.a.createElement(k,{message:"Impossible de d'afficher la liste des personnages \xe0 cause d'une erreur technique."}),ok:r.a.createElement(x,{characters:a})}[t],r.a.createElement(D,null))))))}),V=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.setStatus,n=t.setCharacters,r=t.query,c=t.offset,u=t.total,a("loading"),e.next=4,f({query:r,offset:c,total:u});case 4:(l=e.sent)?(n(l),a("ok")):a("error");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),u=Object(l.a)(c,2),s=u[0],o=u[1],i=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2);return{value:t[0],set:t[1]}}(),m=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2);return{value:t[0],set:t[1]}}(),f=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2);return{value:t[0],set:t[1]}}(),v=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2);return{value:t[0],set:t[1]}}();return Object(n.useEffect)((function(){V({setStatus:r,setCharacters:o,query:m,offset:v,total:f})}),[m.value,v.value]),{details:i,query:m,total:f,offset:v,status:a,characters:s}},J=function(){var e=A();return r.a.createElement(L,e)};u.a.render(r.a.createElement(J,null),document.getElementById("root"))}],[[7,1,2]]]);
//# sourceMappingURL=main.1bfc9a7e.chunk.js.map